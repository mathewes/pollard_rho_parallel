if test "$optimization" = profiling; then
  which_graphic_lib=none
fi

_graphic_list="which_graphic_lib X11 X11_INC X11_LIBS \
FLTKDIR FLTK_LIBS QTDIR QTLIB"

if test -z "$has_waitpid" -o -z "$has_setsid"; then
  echo "### Missing waitpid() or setsid(), no Hi-Res graphing window"
  which_graphic_lib=none
else
  if test -n "$with_fltk"; then which_graphic_lib=fltk; fi
  if test -n "$with_qt";   then which_graphic_lib=Qt; fi
  if test "$which_graphic_lib" != none; then
    case $osname in
      mingw) case $which_graphic_lib in
                win32|auto) which_graphic_lib=win32;;
              esac;;
      *) . ./get_X11  # X11,X11_INC,X11_LIBS.
         if test -z "$X11"; then
           case $which_graphic_lib in X11) which_graphic_lib=none;; esac
         else
           case $which_graphic_lib in auto) which_graphic_lib=X11;; esac
         fi;;
    esac
  fi

  if test "$fastread" != yes; then
    cat << EOT
==========================================================================
GP contains high resolution plotting functions. Choose among
       none       X11       fltk      Qt     win32
EOT
    echo $n ..."Use which graphic library (\"none\" means no hi-res plot) ? $c"
    rep="none X11 fltk Qt win32";
    dflt=$which_graphic_lib; . ./myread
    which_graphic_lib=$ans
  fi
fi

case $which_graphic_lib in
  auto|fltk)
    . ./get_fltk # FLTKDIR, FLTK_LIBS
    if test -z "$FLTKDIR"; then
      case $which_graphic_lib in fltk) which_graphic_lib=none;; esac
    else
      which_graphic_lib=fltk
    fi;;
esac
case $which_graphic_lib in
  auto|Qt|qt)
    . ./get_Qt   # QTDIR, QTLIB
    if test -z "$QTDIR"; then
      case $which_graphic_lib in qt|Qt) which_graphic_lib=none;; esac
    fi;;
esac
case $which_graphic_lib in auto) which_graphic_lib=none;; esac

echo "Hi-Res Graphics: $which_graphic_lib"
